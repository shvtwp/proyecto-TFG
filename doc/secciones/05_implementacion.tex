\chapter{Implementación}

La implementación del software se ha dividido en hitos. Estos han sido definidos en GitHub
y cada uno de ellos contiene un grupo de \textit{issues} que se corresponden con las distintas
mejoras que se han ido incorporando al software a lo largo de su desarrollo.

Cada milestone representa un bloque de trabajo con un objetivo definido, lo que permite seguir
un enfoque ágil, enfocado en construir progresivamente un prototipo sólido en lugar de intentar
desarrollar todo el sistema de una vez. 

\section{Milestone 1: Elección del lenguaje de programación}
En este primer hito se decidió el lenguaje de programación a utilizar para el desarrollo del software,
siendo Python la opción elegida. Esta elección se justificó y documentó debidamente en el
\hyperref[sec:lenguaje-programación]{anterior capítulo}.

\section{Milestone 2: Modelo del problema}
Este hito se centra en dos tareas principales: la configuración de las herramientas necesarias para
el desarrollo guiado por pruebas, y la definición del modelo del dominio siguiendo el enfoque 
\textit{Domain-Driven Design} (DDD).

\subsection{Configuración del entorno de desarrollo}
En el capítulo anterior se seleccionaron las herramientas que se emplearían para 
\hyperref[sec:gestor-dependencias]{gestionar las dependencias y el entorno} y 
\hyperref[sec:herramienta-testeo]{realizar pruebas}. En este hito se procedió a su instalación y 
configuración.

\subsubsection{Poetry}
Se ha usado \textit{Poetry} para gestionar las dependencias y el entorno virtual del proyecto.
La configuración del gestor de dependencias se ha realizado con el comando:

\begin{lstlisting}[language=bash]
poetry init -n
\end{lstlisting}

Este comando genera automáticamente un archivo \texttt{pyproject.toml} en la raíz del
repositorio, que contiene la información básica del proyecto y servirá como punto central
para la gestión de dependencias.

\subsubsection{Pytest}
La herramienta seleccionada para las pruebas unitarias ha sido \texttt{pytest}.
La elección de esta herramienta ya fue justificada en el capítulo anterior; aquí se documenta su 
incorporación al proyecto mediante Poetry:

\begin{lstlisting}[language=bash]
poetry add --group dev pytest
\end{lstlisting}

Con esta instrucción, \texttt{pytest} se añade al grupo de dependencias \texttt{dev}. Esto significa
que se instala únicamente para el entorno de desarrollo y no se considera una dependencia necesaria
para la ejecución del prototipo en producción. De esta manera se mantiene una separación clara entre
las librerías empleadas para programar y probar el software, y aquellas que serán estrictamente
necesarias para su despliegue.

Al instalar dependencias mediante Poetry, junto al archivo \texttt{pyproject.toml} se genera 
automáticamente el archivo \texttt{poetry.lock}. El primero declara qué dependencias se requieren y 
en qué rango de versiones son aceptables; en cambio, el archivo \texttt{poetry.lock} registra la 
versión exacta de esas dependencias en el momento de la instalación. Gracias a este mecanismo se 
garantiza la reproducibilidad del entorno, ya que cualquier persona que clone el repositorio e 
instale las dependencias obtendrá exactamente las mismas versiones usadas en el desarrollo 
original.

\subsection{Modelo del dominio}
El modelado del dominio se ha realizado siguiendo el enfoque \textit{Domain-Driven Design} (DDD)
propuesto por Eric Evans \cite{evansDDD}. Este método de diseño de software se centra en que
el sistema refleje fielmente la realidad del dominio que se está modelando, evitando que los 
aspectos técnicos o de implementación condicionen la representación del problema.

Uno de los principios fundamentales de DDD es la creación de un \textit{lenguaje ubicuo}, que
consiste en definir términos y conceptos específicos del dominio para que los conceptos empleados en
el código coincidan con los del propio dominio. De este modo se facilita la comunicación entre el 
análisis y la implementación. En este proyecto se ha definido el siguiente lenguaje ubicuo:

\begin{itemize}
    \item \textbf{Escudo}: Entendemos como escudo a la representación gráfica de un conjunto de
    elementos heráldicos que identifican a una persona, entidad o institución.
    \item \textbf{Blasón}: Descripción textual del escudo.
    \item \textbf{Portador}: Persona, entidad o institución a la que pertenece el escudo.
    \item \textbf{Campo}: Superficie del escudo donde se disponen los elementos heráldicos.
    \item \textbf{Boca}: Forma exterior del escudo, es decir, su contorno.
    \item \textbf{Partición}: Cada una de las divisiones del campo del escudo. 
    \item \textbf{Esmalte}: Color o metal con el que se pinta un elemento heráldico.
    \item \textbf{Pieza heráldica}: Son elementos de distinto esmalte al del campo que suelen tocar
    los bordes del escudo.
    \item \textbf{Figura o mueble}: Son todo aquello que se encuentra dentro del campo del escudo y
    no resulta ser una pieza heráldica.
    \item \textbf{Adorno exterior}: Son todos aquellos elementos que no se encuentran dentro del campo
    del escudo.
\end{itemize}

A partir de este lenguaje ubicuo se identifican dos tipos de elementos: las \textit{entidades}, que
tienen identidad propia, y los \textit{objetos de valor}, que se definen únicamente por sus atributos.
Estas dos categorías de elementos constituyen el modelo del problema. En esta primera iteración del
proyecto se han identificado las siguientes entidades y objetos de valor:

\begin{itemize}
    \item \textbf{Escudo}: Representa la entidad principal del dominio, con su propia identidad.
    \item \textbf{Campo}: Objeto de valor que define las características del campo del escudo.
    \item \textbf{Esmalte}: Objeto de valor que define los colores y metales usados en el escudo.
\end{itemize}

En esta primera iteración se ha decidido limitar el modelo a una parte reducida del lenguaje ubicuo. 
Se ha identificado como entidad principal el \textbf{Escudo} y se han definido como objetos de valor 
iniciales el \textbf{Campo}, la \textbf{Boca} y el \textbf{Esmalte}. 

Otros elementos como el \textbf{Portador}, las \textbf{Particiones}, las \textbf{Piezas heráldicas}, 
las \textbf{Figuras} o los \textbf{Adornos exteriores} se han recogido en el lenguaje ubicuo, pero se 
abordarán en futuras iteraciones.
